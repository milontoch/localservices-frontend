(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[451],{4686:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/reviews",function(){return n(6448)}])},9871:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5893),s=n(1664),a=n.n(s),i=n(1163),c=n(7294),o=n(8561);function l(e){let{children:t}=e,n=(0,i.useRouter)(),[s,l]=(0,c.useState)(null);return(0,c.useEffect)(()=>{l((0,o.PR)())},[]),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("nav",{className:"bg-white shadow-md",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)(a(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"LocalServices"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(a(),{href:"/blog",className:"text-gray-700 hover:text-primary-600",children:"Blog"}),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-gray-700",children:["Hi, ",s.full_name||s.name]}),(0,r.jsx)("button",{onClick:()=>{(0,o.H6)(),(0,o.kX)(),l(null),n.push("/")},className:"btn-secondary",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{href:"/auth/login",className:"text-gray-700 hover:text-primary-600",children:"Login"}),(0,r.jsx)(a(),{href:"/auth/register",className:"btn-primary",children:"Sign Up"}),(0,r.jsx)(a(),{href:"/provider/register",className:"btn-secondary",children:"Register as Provider"})]})]})]})})}),(0,r.jsx)("main",{className:"flex-grow",children:t})]})}},1782:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);function s(e){let{rating:t}=e,n=Math.floor(t),s=t%1>=.5;return(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[[...Array(n)].map((e,t)=>(0,r.jsx)("span",{className:"text-yellow-400",children:"★"},"full-".concat(t))),s&&(0,r.jsx)("span",{className:"text-yellow-400",children:"☆"}),[...Array(5-n-(s?1:0))].map((e,t)=>(0,r.jsx)("span",{className:"text-gray-300",children:"★"},"empty-".concat(t))),(0,r.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:t.toFixed(1)})]})}},6448:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(5893),s=n(7294),a=n(1163),i=n(9008),c=n.n(i),o=n(9871),l=n(8561),u=n(1782);function d(){let e=(0,a.useRouter)(),[t,n]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0),[m,x]=(0,s.useState)("");(0,s.useEffect)(()=>{let t=(0,l.PR)();if(!t||"admin"!==t.role){e.push("/auth/login");return}f()},[e]);let f=async()=>{try{let e=await (0,l.Ji)();n(e.data)}catch(e){x("Failed to load reviews")}finally{d(!1)}},h=async e=>{if(confirm("Delete this review? This action cannot be undone."))try{await (0,l.k4)(e),n(t.filter(t=>t.id!==e)),alert("Review deleted")}catch(e){alert("Failed to delete review")}};return i?(0,r.jsx)(o.Z,{children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-16 text-center",children:(0,r.jsx)("p",{children:"Loading..."})})}):(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Review Moderation - Admin"})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Review Moderation"}),m&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:m}),0===t.length?(0,r.jsx)("div",{className:"card text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No reviews found"})}):(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t,n;return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:null===(t=e.user)||void 0===t?void 0:t.full_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["for ",null===(n=e.provider)||void 0===n?void 0:n.full_name]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(u.Z,{rating:e.rating}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.comment&&(0,r.jsx)("p",{className:"text-gray-700 mb-3",children:e.comment}),(0,r.jsx)("button",{onClick:()=>h(e.id),className:"text-red-600 hover:underline text-sm",children:"Delete Review"})]},e.id)})})]})]})}},8561:function(e,t,n){"use strict";n.d(t,{CP:function(){return d},H6:function(){return E},J8:function(){return w},J9:function(){return m},Ji:function(){return R},Mu:function(){return u},NI:function(){return p},NN:function(){return k},PR:function(){return T},SK:function(){return S},V:function(){return N},VH:function(){return x},XU:function(){return f},av:function(){return L},bW:function(){return C},bl:function(){return y},dS:function(){return h},k4:function(){return I},kX:function(){return J},oO:function(){return g},sv:function(){return _},t1:function(){return l},u3:function(){return v},uB:function(){return P},wd:function(){return c},x4:function(){return o},xQ:function(){return b},z2:function(){return i},zl:function(){return j}});var r=n(7066);let s=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",a=r.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let i=e=>a.post("/auth/register",e),c=e=>a.post("/auth/register-provider",e),o=e=>a.post("/auth/login",e),l=e=>a.post("/auth/request-otp",e),u=e=>a.post("/auth/verify-otp",e),d=()=>a.get("/categories"),m=e=>a.get("/providers",{params:e}),x=e=>a.get("/providers/".concat(e)),f=e=>a.post("/reviews",e),h=e=>a.post("/contact-records",e),p=e=>a.get("/contact-records/check",{params:e}),g=e=>a.post("/verifications",e,{headers:{"Content-Type":"multipart/form-data"}}),v=e=>a.get("/blog",{params:e}),j=e=>a.get("/blog/".concat(e)),N=()=>a.get("/admin/blog"),y=e=>a.post("/admin/blog",e,{headers:{"Content-Type":"multipart/form-data"}}),b=e=>a.delete("/admin/blog/".concat(e)),w=()=>a.get("/admin/verifications"),_=(e,t)=>a.put("/admin/verifications/".concat(e),t),S=e=>a.get("/admin/users",{params:e}),k=e=>a.get("/admin/providers",{params:e}),R=e=>a.get("/admin/reviews",{params:e}),I=e=>a.delete("/admin/reviews/".concat(e)),P=e=>{localStorage.setItem("access_token",e)},C=()=>localStorage.getItem("access_token"),E=()=>{localStorage.removeItem("access_token")},L=e=>{localStorage.setItem("user",JSON.stringify(e))},T=()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},J=()=>{localStorage.removeItem("user")}}},function(e){e.O(0,[173,774,888,179],function(){return e(e.s=4686)}),_N_E=e.O()}]);