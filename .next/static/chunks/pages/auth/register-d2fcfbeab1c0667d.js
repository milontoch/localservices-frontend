(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{3829:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return s(7418)}])},7418:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var t=s(5893),n=s(7294),r=s(1163),l=s(9008),i=s.n(l),d=s(1664),u=s.n(d),o=s(9871),c=s(8561);function m(){let e=(0,r.useRouter)(),[a,s]=(0,n.useState)(1),[l,d]=(0,n.useState)({full_name:"",email:"",phone_number:"",password:"",confirmPassword:""}),[m,p]=(0,n.useState)(""),[h,x]=(0,n.useState)(""),[b,f]=(0,n.useState)(!1),v=async e=>{if(e.preventDefault(),x(""),l.password!==l.confirmPassword){x("Passwords do not match");return}f(!0);try{await (0,c.z2)({full_name:l.full_name,email:l.email,phone_number:l.phone_number,password:l.password}),await (0,c.t1)({phone_number:l.phone_number,user_type:"user"}),s(2)}catch(e){var a,t;x((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.errors)?Object.values(e.response.data.errors).flat().join(", "):"Registration failed")}finally{f(!1)}},j=async a=>{a.preventDefault(),x(""),f(!0);try{let a=await (0,c.Mu)({phone_number:l.phone_number,otp:m,user_type:"user"});(0,c.uB)(a.data.access_token),(0,c.av)(a.data.user),e.push("/")}catch(e){var s,t;x((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"OTP verification failed")}finally{f(!1)}};return(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"Register - LocalServices"})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto card",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Create Account"}),h&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:h}),1===a?(0,t.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),(0,t.jsx)("input",{type:"text",value:l.full_name,onChange:e=>d({...l,full_name:e.target.value}),className:"input-field",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:l.email,onChange:e=>d({...l,email:e.target.value}),className:"input-field",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",value:l.phone_number,onChange:e=>d({...l,phone_number:e.target.value}),className:"input-field",placeholder:"+2348012345678",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",value:l.password,onChange:e=>d({...l,password:e.target.value}),className:"input-field",minLength:"6",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",value:l.confirmPassword,onChange:e=>d({...l,confirmPassword:e.target.value}),className:"input-field",required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:b,className:"btn-primary w-full",children:b?"Registering...":"Register"})]}):(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-center text-gray-600 mb-4",children:["We've sent a verification code to ",l.phone_number]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Enter OTP"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:"input-field text-center text-2xl tracking-widest",maxLength:"6",pattern:"[0-9]{6}",placeholder:"000000",required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:b,className:"btn-primary w-full",children:b?"Verifying...":"Verify OTP"}),(0,t.jsx)("button",{type:"button",onClick:()=>s(1),className:"btn-secondary w-full",children:"Back"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,t.jsx)(u(),{href:"/auth/login",className:"text-primary-600 hover:underline",children:"Login"})]})})]})})]})}}},function(e){e.O(0,[173,871,774,888,179],function(){return e(e.s=3829)}),_N_E=e.O()}]);