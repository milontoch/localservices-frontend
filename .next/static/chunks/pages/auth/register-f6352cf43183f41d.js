(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{3829:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return n(7418)}])},9871:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5893),s=n(1664),a=n.n(s),i=n(1163),l=n(7294),o=n(8561);function c(e){let{children:t}=e,n=(0,i.useRouter)(),[s,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{c((0,o.PR)())},[]),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("nav",{className:"bg-white shadow-md",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)(a(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"LocalServices"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(a(),{href:"/blog",className:"text-gray-700 hover:text-primary-600",children:"Blog"}),s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-gray-700",children:["Hi, ",s.full_name||s.name]}),(0,r.jsx)("button",{onClick:()=>{(0,o.H6)(),(0,o.kX)(),c(null),n.push("/")},className:"btn-secondary",children:"Logout"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{href:"/auth/login",className:"text-gray-700 hover:text-primary-600",children:"Login"}),(0,r.jsx)(a(),{href:"/auth/register",className:"btn-primary",children:"Sign Up"}),(0,r.jsx)(a(),{href:"/provider/register",className:"btn-secondary",children:"Register as Provider"})]})]})]})})}),(0,r.jsx)("main",{className:"flex-grow",children:t})]})}},7418:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(5893),s=n(7294),a=n(1163),i=n(9008),l=n.n(i),o=n(1664),c=n.n(o),u=n(9871),d=n(8561);function m(){let e=(0,a.useRouter)(),[t,n]=(0,s.useState)(1),[i,o]=(0,s.useState)({full_name:"",email:"",phone_number:"",password:"",confirmPassword:""}),[m,f]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[x,g]=(0,s.useState)(!1),v=async e=>{if(e.preventDefault(),p(""),i.password!==i.confirmPassword){p("Passwords do not match");return}g(!0);try{await (0,d.z2)({full_name:i.full_name,email:i.email,phone_number:i.phone_number,password:i.password}),await (0,d.t1)({phone_number:i.phone_number,user_type:"user"}),n(2)}catch(e){var t,r;p((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.errors)?Object.values(e.response.data.errors).flat().join(", "):"Registration failed")}finally{g(!1)}},b=async t=>{t.preventDefault(),p(""),g(!0);try{let t=await (0,d.Mu)({phone_number:i.phone_number,otp:m,user_type:"user"});(0,d.uB)(t.data.access_token),(0,d.av)(t.data.user),e.push("/")}catch(e){var n,r;p((null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.error)||"OTP verification failed")}finally{g(!1)}};return(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"Register - LocalServices"})}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto card",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Create Account"}),h&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:h}),1===t?(0,r.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),(0,r.jsx)("input",{type:"text",value:i.full_name,onChange:e=>o({...i,full_name:e.target.value}),className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",value:i.email,onChange:e=>o({...i,email:e.target.value}),className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),(0,r.jsx)("input",{type:"tel",value:i.phone_number,onChange:e=>o({...i,phone_number:e.target.value}),className:"input-field",placeholder:"+2348012345678",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Password"}),(0,r.jsx)("input",{type:"password",value:i.password,onChange:e=>o({...i,password:e.target.value}),className:"input-field",minLength:"6",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",value:i.confirmPassword,onChange:e=>o({...i,confirmPassword:e.target.value}),className:"input-field",required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:x,className:"btn-primary w-full",children:x?"Registering...":"Register"})]}):(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("p",{className:"text-center text-gray-600 mb-4",children:["We've sent a verification code to ",i.phone_number]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Enter OTP"}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>f(e.target.value),className:"input-field text-center text-2xl tracking-widest",maxLength:"6",pattern:"[0-9]{6}",placeholder:"000000",required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:x,className:"btn-primary w-full",children:x?"Verifying...":"Verify OTP"}),(0,r.jsx)("button",{type:"button",onClick:()=>n(1),className:"btn-secondary w-full",children:"Back"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,r.jsx)(c(),{href:"/auth/login",className:"text-primary-600 hover:underline",children:"Login"})]})})]})})]})}},8561:function(e,t,n){"use strict";n.d(t,{CP:function(){return d},H6:function(){return L},J8:function(){return _},J9:function(){return m},Ji:function(){return P},Mu:function(){return u},NI:function(){return x},NN:function(){return S},PR:function(){return O},SK:function(){return k},V:function(){return j},VH:function(){return f},XU:function(){return h},av:function(){return E},bW:function(){return I},bl:function(){return N},dS:function(){return p},k4:function(){return C},kX:function(){return T},oO:function(){return g},sv:function(){return w},t1:function(){return c},u3:function(){return v},uB:function(){return R},wd:function(){return l},x4:function(){return o},xQ:function(){return y},z2:function(){return i},zl:function(){return b}});var r=n(7066);let s=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",a=r.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let i=e=>a.post("/auth/register",e),l=e=>a.post("/auth/register-provider",e),o=e=>a.post("/auth/login",e),c=e=>a.post("/auth/request-otp",e),u=e=>a.post("/auth/verify-otp",e),d=()=>a.get("/categories"),m=e=>a.get("/providers",{params:e}),f=e=>a.get("/providers/".concat(e)),h=e=>a.post("/reviews",e),p=e=>a.post("/contact-records",e),x=e=>a.get("/contact-records/check",{params:e}),g=e=>a.post("/verifications",e,{headers:{"Content-Type":"multipart/form-data"}}),v=e=>a.get("/blog",{params:e}),b=e=>a.get("/blog/".concat(e)),j=()=>a.get("/admin/blog"),N=e=>a.post("/admin/blog",e,{headers:{"Content-Type":"multipart/form-data"}}),y=e=>a.delete("/admin/blog/".concat(e)),_=()=>a.get("/admin/verifications"),w=(e,t)=>a.put("/admin/verifications/".concat(e),t),k=e=>a.get("/admin/users",{params:e}),S=e=>a.get("/admin/providers",{params:e}),P=e=>a.get("/admin/reviews",{params:e}),C=e=>a.delete("/admin/reviews/".concat(e)),R=e=>{localStorage.setItem("access_token",e)},I=()=>localStorage.getItem("access_token"),L=()=>{localStorage.removeItem("access_token")},E=e=>{localStorage.setItem("user",JSON.stringify(e))},O=()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},T=()=>{localStorage.removeItem("user")}}},function(e){e.O(0,[173,774,888,179],function(){return e(e.s=3829)}),_N_E=e.O()}]);