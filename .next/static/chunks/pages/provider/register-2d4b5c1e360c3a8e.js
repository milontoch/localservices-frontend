(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[825],{9532:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/register",function(){return r(4727)}])},9871:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(5893),a=r(1664),s=r.n(a),i=r(1163),l=r(7294),o=r(8561);function c(e){let{children:t}=e,r=(0,i.useRouter)(),[a,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{c((0,o.PR)())},[]),(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,n.jsx)("nav",{className:"bg-white shadow-md",children:(0,n.jsx)("div",{className:"container mx-auto px-4",children:(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsx)(s(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"LocalServices"}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(s(),{href:"/blog",className:"text-gray-700 hover:text-primary-600",children:"Blog"}),a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"text-gray-700",children:["Hi, ",a.full_name||a.name]}),(0,n.jsx)("button",{onClick:()=>{(0,o.H6)(),(0,o.kX)(),c(null),r.push("/")},className:"btn-secondary",children:"Logout"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s(),{href:"/auth/login",className:"text-gray-700 hover:text-primary-600",children:"Login"}),(0,n.jsx)(s(),{href:"/auth/register",className:"btn-primary",children:"Sign Up"}),(0,n.jsx)(s(),{href:"/provider/register",className:"btn-secondary",children:"Register as Provider"})]})]})]})})}),(0,n.jsx)("main",{className:"flex-grow",children:t})]})}},4727:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(5893),a=r(7294),s=r(1163),i=r(9008),l=r.n(i),o=r(1664),c=r.n(o),u=r(9871),d=r(8561),m=r(8806);function p(){let e=(0,s.useRouter)(),[t,r]=(0,a.useState)(1),[i,o]=(0,a.useState)([]),[p,x]=(0,a.useState)({full_name:"",email:"",phone_number:"",password:"",confirmPassword:"",category_id:"",experience_years:1,address:""}),[f,h]=(0,a.useState)(""),[g,v]=(0,a.useState)(null),[b,y]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),[_,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{P()},[]);let P=async()=>{try{let e=await (0,d.CP)();o(e.data)}catch(e){console.error("Error fetching categories:",e)}},S=async e=>{if(e.preventDefault(),y(""),p.password!==p.confirmPassword){y("Passwords do not match");return}N(!0);try{let e={lat:null,lng:null};p.address&&(e=await (0,m.g)(p.address)||e);let t=await (0,d.wd)({full_name:p.full_name,email:p.email,phone_number:p.phone_number,password:p.password,category_id:p.category_id,experience_years:p.experience_years,latitude:e.lat,longitude:e.lng});w(t.data.provider.id),await (0,d.t1)({phone_number:p.phone_number,user_type:"provider"}),r(2)}catch(e){var t,n;y((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.errors)?Object.values(e.response.data.errors).flat().join(", "):"Registration failed")}finally{N(!1)}},k=async e=>{e.preventDefault(),y(""),N(!0);try{let e=await (0,d.Mu)({phone_number:p.phone_number,otp:f,user_type:"provider"});(0,d.uB)(e.data.access_token),(0,d.av)(e.data.user),r(3)}catch(e){var t,n;y((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.error)||"OTP verification failed")}finally{N(!1)}},C=async t=>{if(t.preventDefault(),y(""),!g){y("Please select a verification document");return}N(!0);try{let t=new FormData;t.append("provider_id",_),t.append("document",g),await (0,d.oO)(t),alert("Verification document uploaded! Your account will be reviewed by an admin."),e.push("/")}catch(e){var r,n;y((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.error)||"Upload failed")}finally{N(!1)}};return(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:"Register as Provider - LocalServices"})}),(0,n.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,n.jsxs)("div",{className:"max-w-2xl mx-auto card",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Become a Service Provider"}),(0,n.jsxs)("div",{className:"flex justify-between mb-8",children:[(0,n.jsx)("div",{className:"flex-1 text-center ".concat(t>=1?"text-primary-600 font-semibold":"text-gray-400"),children:"1. Register"}),(0,n.jsx)("div",{className:"flex-1 text-center ".concat(t>=2?"text-primary-600 font-semibold":"text-gray-400"),children:"2. Verify Phone"}),(0,n.jsx)("div",{className:"flex-1 text-center ".concat(t>=3?"text-primary-600 font-semibold":"text-gray-400"),children:"3. Upload ID"})]}),b&&(0,n.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:b}),1===t&&(0,n.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),(0,n.jsx)("input",{type:"text",value:p.full_name,onChange:e=>x({...p,full_name:e.target.value}),className:"input-field",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,n.jsx)("input",{type:"email",value:p.email,onChange:e=>x({...p,email:e.target.value}),className:"input-field",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),(0,n.jsx)("input",{type:"tel",value:p.phone_number,onChange:e=>x({...p,phone_number:e.target.value}),className:"input-field",placeholder:"+2348012345678",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Service Category"}),(0,n.jsxs)("select",{value:p.category_id,onChange:e=>x({...p,category_id:e.target.value}),className:"input-field",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select category"}),i.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Years of Experience"}),(0,n.jsx)("input",{type:"number",min:"0",value:p.experience_years,onChange:e=>x({...p,experience_years:parseInt(e.target.value)}),className:"input-field",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address"}),(0,n.jsx)("input",{type:"text",value:p.address,onChange:e=>x({...p,address:e.target.value}),className:"input-field",placeholder:"Enter your address"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Password"}),(0,n.jsx)("input",{type:"password",value:p.password,onChange:e=>x({...p,password:e.target.value}),className:"input-field",minLength:"6",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),(0,n.jsx)("input",{type:"password",value:p.confirmPassword,onChange:e=>x({...p,confirmPassword:e.target.value}),className:"input-field",required:!0})]})]}),(0,n.jsx)("button",{type:"submit",disabled:j,className:"btn-primary w-full",children:j?"Registering...":"Continue"})]}),2===t&&(0,n.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,n.jsxs)("p",{className:"text-center text-gray-600 mb-4",children:["We've sent a verification code to ",p.phone_number]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Enter OTP"}),(0,n.jsx)("input",{type:"text",value:f,onChange:e=>h(e.target.value),className:"input-field text-center text-2xl tracking-widest",maxLength:"6",pattern:"[0-9]{6}",placeholder:"000000",required:!0})]}),(0,n.jsx)("button",{type:"submit",disabled:j,className:"btn-primary w-full",children:j?"Verifying...":"Verify OTP"})]}),3===t&&(0,n.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-center text-gray-600 mb-4",children:"Upload a government-issued ID or business license for verification"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Verification Document"}),(0,n.jsx)("input",{type:"file",accept:"image/*,.pdf",onChange:e=>v(e.target.files[0]),className:"input-field",required:!0}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Accepted formats: JPG, PNG, PDF (Max 5MB)"})]}),(0,n.jsx)("button",{type:"submit",disabled:j,className:"btn-primary w-full",children:j?"Uploading...":"Submit for Verification"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Your account will be reviewed by our team within 24-48 hours"})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsxs)("p",{className:"text-gray-600",children:["Already have an account?"," ",(0,n.jsx)(c(),{href:"/auth/login",className:"text-primary-600 hover:underline",children:"Login"})]})})]})})]})}},8561:function(e,t,r){"use strict";r.d(t,{CP:function(){return d},H6:function(){return R},J8:function(){return _},J9:function(){return m},Ji:function(){return k},Mu:function(){return u},NI:function(){return h},NN:function(){return S},PR:function(){return L},SK:function(){return P},V:function(){return y},VH:function(){return p},XU:function(){return x},av:function(){return q},bW:function(){return I},bl:function(){return j},dS:function(){return f},k4:function(){return C},kX:function(){return O},oO:function(){return g},sv:function(){return w},t1:function(){return c},u3:function(){return v},uB:function(){return E},wd:function(){return l},x4:function(){return o},xQ:function(){return N},z2:function(){return i},zl:function(){return b}});var n=r(7066);let a=r(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",s=n.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let i=e=>s.post("/auth/register",e),l=e=>s.post("/auth/register-provider",e),o=e=>s.post("/auth/login",e),c=e=>s.post("/auth/request-otp",e),u=e=>s.post("/auth/verify-otp",e),d=()=>s.get("/categories"),m=e=>s.get("/providers",{params:e}),p=e=>s.get("/providers/".concat(e)),x=e=>s.post("/reviews",e),f=e=>s.post("/contact-records",e),h=e=>s.get("/contact-records/check",{params:e}),g=e=>s.post("/verifications",e,{headers:{"Content-Type":"multipart/form-data"}}),v=e=>s.get("/blog",{params:e}),b=e=>s.get("/blog/".concat(e)),y=()=>s.get("/admin/blog"),j=e=>s.post("/admin/blog",e,{headers:{"Content-Type":"multipart/form-data"}}),N=e=>s.delete("/admin/blog/".concat(e)),_=()=>s.get("/admin/verifications"),w=(e,t)=>s.put("/admin/verifications/".concat(e),t),P=e=>s.get("/admin/users",{params:e}),S=e=>s.get("/admin/providers",{params:e}),k=e=>s.get("/admin/reviews",{params:e}),C=e=>s.delete("/admin/reviews/".concat(e)),E=e=>{localStorage.setItem("access_token",e)},I=()=>localStorage.getItem("access_token"),R=()=>{localStorage.removeItem("access_token")},q=e=>{localStorage.setItem("user",JSON.stringify(e))},L=()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},O=()=>{localStorage.removeItem("user")}},8806:function(e,t,r){"use strict";r.d(t,{g:function(){return s},v:function(){return i}});var n=r(7066);let a=r(3454).env.NEXT_PUBLIC_MAPBOX_KEY,s=async e=>{try{let t=await n.Z.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json"),{params:{access_token:a,limit:1}});if(t.data.features.length>0){let[e,r]=t.data.features[0].center;return{lat:r,lng:e}}return null}catch(e){return console.error("Geocoding error:",e),null}},i=()=>new Promise((e,t)=>{if(!navigator.geolocation){t(Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},e=>t(e))})}},function(e){e.O(0,[173,774,888,179],function(){return e(e.s=9532)}),_N_E=e.O()}]);