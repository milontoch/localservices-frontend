(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{6650:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/providers/[id]",function(){return r(9371)}])},9871:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(5893),s=r(1664),a=r.n(s),i=r(1163),c=r(7294),l=r(8561);function o(e){let{children:t}=e,r=(0,i.useRouter)(),[s,o]=(0,c.useState)(null);return(0,c.useEffect)(()=>{o((0,l.PR)())},[]),(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,n.jsx)("nav",{className:"bg-white shadow-md",children:(0,n.jsx)("div",{className:"container mx-auto px-4",children:(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsx)(a(),{href:"/",className:"text-2xl font-bold text-primary-600",children:"LocalServices"}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(a(),{href:"/blog",className:"text-gray-700 hover:text-primary-600",children:"Blog"}),s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"text-gray-700",children:["Hi, ",s.full_name||s.name]}),(0,n.jsx)("button",{onClick:()=>{(0,l.H6)(),(0,l.kX)(),o(null),r.push("/")},className:"btn-secondary",children:"Logout"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{href:"/auth/login",className:"text-gray-700 hover:text-primary-600",children:"Login"}),(0,n.jsx)(a(),{href:"/auth/register",className:"btn-primary",children:"Sign Up"}),(0,n.jsx)(a(),{href:"/provider/register",className:"btn-secondary",children:"Register as Provider"})]})]})]})})}),(0,n.jsx)("main",{className:"flex-grow",children:t})]})}},1782:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(5893);function s(e){let{rating:t}=e,r=Math.floor(t),s=t%1>=.5;return(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[[...Array(r)].map((e,t)=>(0,n.jsx)("span",{className:"text-yellow-400",children:"★"},"full-".concat(t))),s&&(0,n.jsx)("span",{className:"text-yellow-400",children:"☆"}),[...Array(5-r-(s?1:0))].map((e,t)=>(0,n.jsx)("span",{className:"text-gray-300",children:"★"},"empty-".concat(t))),(0,n.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:t.toFixed(1)})]})}},9371:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(5893),s=r(7294),a=r(1163),i=r(9008),c=r.n(i),l=r(5675),o=r.n(l),d=r(9871),u=r(1782),m=r(8561);function x(){var e;let t=(0,a.useRouter)(),{id:r}=t.query,[i,l]=(0,s.useState)(null),[x,h]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),[v,g]=(0,s.useState)(!1),[j,N]=(0,s.useState)({rating:5,comment:""}),[b,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{r&&(w(),_())},[r]);let w=async()=>{try{let e=await (0,m.VH)(r);l(e.data)}catch(e){console.error("Error fetching provider:",e)}finally{h(!1)}},_=async()=>{if((0,m.bW)())try{let e=await (0,m.NI)({provider_id:r});f(e.data.has_contacted)}catch(e){console.error("Error checking contact:",e)}},S=async e=>{if(!(0,m.bW)()){t.push("/auth/login");return}try{await (0,m.dS)({provider_id:r}),f(!0),"call"===e?window.location.href="tel:".concat(i.phone_number):"whatsapp"===e&&window.open("https://wa.me/".concat(i.phone_number.replace("+",""),"?text=Hi"),"_blank")}catch(e){console.error("Error recording contact:",e)}},k=async e=>{if(e.preventDefault(),!(0,m.bW)()){t.push("/auth/login");return}y(!0);try{await (0,m.XU)({provider_id:r,...j}),alert("Review submitted successfully!"),g(!1),w()}catch(e){var n,s;alert((null===(s=e.response)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.error)||"Error submitting review")}finally{y(!1)}};return x?(0,n.jsx)(d.Z,{children:(0,n.jsx)("div",{className:"container mx-auto px-4 py-8 text-center",children:"Loading..."})}):i?(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(c(),{children:(0,n.jsxs)("title",{children:[i.full_name," - LocalServices"]})}),(0,n.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsxs)("div",{className:"card",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:i.full_name}),(0,n.jsx)("p",{className:"text-xl text-gray-600",children:null===(e=i.category)||void 0===e?void 0:e.name})]}),i.is_verified&&(0,n.jsx)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full",children:"✓ Verified"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)(u.Z,{rating:i.rating_avg||0}),(0,n.jsxs)("p",{className:"text-gray-600 mt-2",children:[i.experience_years," years of experience"]})]}),i.portfolios&&i.portfolios.length>0&&(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Portfolio"}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:i.portfolios.map(e=>(0,n.jsx)("div",{className:"relative h-48",children:(0,n.jsx)(o(),{src:e.image_url,alt:"Portfolio",fill:!0,className:"object-cover rounded-lg"})},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Reviews"}),i.reviews&&i.reviews.length>0?(0,n.jsx)("div",{className:"space-y-4",children:i.reviews.map(e=>{var t;return(0,n.jsxs)("div",{className:"border-b pb-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold",children:null===(t=e.user)||void 0===t?void 0:t.full_name}),(0,n.jsx)(u.Z,{rating:e.rating})]}),(0,n.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),e.comment&&(0,n.jsx)("p",{className:"text-gray-700",children:e.comment})]},e.id)})}):(0,n.jsx)("p",{className:"text-gray-600",children:"No reviews yet"})]})]})}),(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsxs)("div",{className:"card sticky top-4",children:[(0,n.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Contact Provider"}),i.is_verified?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("button",{onClick:()=>S("call"),className:"btn-primary w-full",children:"\uD83D\uDCDE Call Now"}),(0,n.jsx)("button",{onClick:()=>S("whatsapp"),className:"btn-secondary w-full",children:"\uD83D\uDCAC WhatsApp"}),p&&(0,n.jsx)("div",{className:"mt-6 pt-6 border-t",children:v?(0,n.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,n.jsx)("h4",{className:"font-semibold",children:"Leave a Review"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Rating"}),(0,n.jsxs)("select",{value:j.rating,onChange:e=>N({...j,rating:parseInt(e.target.value)}),className:"input-field",required:!0,children:[(0,n.jsx)("option",{value:"5",children:"5 - Excellent"}),(0,n.jsx)("option",{value:"4",children:"4 - Good"}),(0,n.jsx)("option",{value:"3",children:"3 - Average"}),(0,n.jsx)("option",{value:"2",children:"2 - Poor"}),(0,n.jsx)("option",{value:"1",children:"1 - Very Poor"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Comment (optional)"}),(0,n.jsx)("textarea",{value:j.comment,onChange:e=>N({...j,comment:e.target.value}),className:"input-field",rows:"4",placeholder:"Share your experience..."})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{type:"submit",disabled:b,className:"btn-primary flex-1",children:b?"Submitting...":"Submit Review"}),(0,n.jsx)("button",{type:"button",onClick:()=>g(!1),className:"btn-secondary",children:"Cancel"})]})]}):(0,n.jsx)("button",{onClick:()=>g(!0),className:"btn-primary w-full",children:"✍️ Leave a Review"})})]}):(0,n.jsx)("p",{className:"text-gray-600",children:"This provider is pending verification and cannot be contacted yet."})]})})]})})]}):(0,n.jsx)(d.Z,{children:(0,n.jsx)("div",{className:"container mx-auto px-4 py-8 text-center",children:"Provider not found"})})}},8561:function(e,t,r){"use strict";r.d(t,{CP:function(){return u},H6:function(){return I},J8:function(){return w},J9:function(){return m},Ji:function(){return C},Mu:function(){return d},NI:function(){return f},NN:function(){return k},PR:function(){return D},SK:function(){return S},V:function(){return N},VH:function(){return x},XU:function(){return h},av:function(){return L},bW:function(){return R},bl:function(){return b},dS:function(){return p},k4:function(){return P},kX:function(){return Z},oO:function(){return v},sv:function(){return _},t1:function(){return o},u3:function(){return g},uB:function(){return E},wd:function(){return c},x4:function(){return l},xQ:function(){return y},z2:function(){return i},zl:function(){return j}});var n=r(7066);let s=r(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",a=n.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let i=e=>a.post("/auth/register",e),c=e=>a.post("/auth/register-provider",e),l=e=>a.post("/auth/login",e),o=e=>a.post("/auth/request-otp",e),d=e=>a.post("/auth/verify-otp",e),u=()=>a.get("/categories"),m=e=>a.get("/providers",{params:e}),x=e=>a.get("/providers/".concat(e)),h=e=>a.post("/reviews",e),p=e=>a.post("/contact-records",e),f=e=>a.get("/contact-records/check",{params:e}),v=e=>a.post("/verifications",e,{headers:{"Content-Type":"multipart/form-data"}}),g=e=>a.get("/blog",{params:e}),j=e=>a.get("/blog/".concat(e)),N=()=>a.get("/admin/blog"),b=e=>a.post("/admin/blog",e,{headers:{"Content-Type":"multipart/form-data"}}),y=e=>a.delete("/admin/blog/".concat(e)),w=()=>a.get("/admin/verifications"),_=(e,t)=>a.put("/admin/verifications/".concat(e),t),S=e=>a.get("/admin/users",{params:e}),k=e=>a.get("/admin/providers",{params:e}),C=e=>a.get("/admin/reviews",{params:e}),P=e=>a.delete("/admin/reviews/".concat(e)),E=e=>{localStorage.setItem("access_token",e)},R=()=>localStorage.getItem("access_token"),I=()=>{localStorage.removeItem("access_token")},L=e=>{localStorage.setItem("user",JSON.stringify(e))},D=()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},Z=()=>{localStorage.removeItem("user")}}},function(e){e.O(0,[173,675,774,888,179],function(){return e(e.s=6650)}),_N_E=e.O()}]);