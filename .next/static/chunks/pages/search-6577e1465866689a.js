(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2774:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(5027)}])},4865:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(5893),s=a(1664),l=a.n(s),n=a(1782);function i(e){var t;let{provider:a}=e;return(0,r.jsx)(l(),{href:"/providers/".concat(a.id),children:(0,r.jsxs)("div",{className:"card group cursor-pointer overflow-hidden",children:[(0,r.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-primary-600 transition-colors",children:a.full_name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:null===(t=a.category)||void 0===t?void 0:t.name}),a.is_verified&&(0,r.jsxs)("span",{className:"badge-success flex items-center space-x-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:"Verified"})]})]})]})}),(0,r.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(n.Z,{rating:a.rating_avg||0})}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,r.jsxs)("span",{className:"font-medium",children:[a.reviews_count||0," reviews"]}),(0,r.jsxs)("span",{children:[a.experience_years||0," yrs exp"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[a.distance&&(0,r.jsxs)("div",{className:"flex items-center text-sm text-primary-600 font-medium",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),a.distance.toFixed(1)," km away"]}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)("button",{className:"w-full bg-primary-50 text-primary-600 py-2 rounded-lg font-medium hover:bg-primary-100 transition-colors group-hover:bg-gradient-primary group-hover:text-white",children:"View Profile"})})]})]})})}},1782:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(5893);function s(e){let{rating:t}=e,a=Math.floor(t),s=t%1>=.5;return(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[[...Array(a)].map((e,t)=>(0,r.jsx)("span",{className:"text-yellow-400",children:"★"},"full-".concat(t))),s&&(0,r.jsx)("span",{className:"text-yellow-400",children:"☆"}),[...Array(5-a-(s?1:0))].map((e,t)=>(0,r.jsx)("span",{className:"text-gray-300",children:"★"},"empty-".concat(t))),(0,r.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:t.toFixed(1)})]})}},9680:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(5893),s=a(7294),l=a(8806);function n(e){let{onSearch:t}=e,[a,n]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[o,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1),m=[{id:"plumber",label:"Plumber",icon:"\uD83D\uDD27"},{id:"carpenter",label:"Carpenter",icon:"\uD83E\uDEB5"},{id:"gardener",label:"Gardener",icon:"\uD83C\uDF31"},{id:"fumigation",label:"Fumigation",icon:"\uD83E\uDDEA"},{id:"catering",label:"Catering",icon:"\uD83C\uDF7D️"},{id:"cleaner",label:"Cleaner",icon:"\uD83E\uDDF9"},{id:"electrician",label:"Electrician",icon:"⚡"}],h=async e=>{if(e.preventDefault(),!a&&!i){alert("Please enter a category or location");return}let r={category:a,location:i};if(o)try{x(!0);let e=await (0,l.v)();r={...r,lat:e.lat,lng:e.lng}}catch(e){console.error("Error getting location:",e),alert("Could not get your location.")}finally{x(!1)}t(r)},p=async()=>{try{x(!0);let e=await (0,l.v)();c("".concat(e.lat.toFixed(4),", ").concat(e.lng.toFixed(4))),d(!0)}catch(e){alert("Could not get your location. Please enter manually.")}finally{x(!1)}};return(0,r.jsxs)("form",{onSubmit:h,className:"card-lg shadow-card-hover",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Find a Service Provider"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-4",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Service Category"}),(0,r.jsxs)("select",{value:a,onChange:e=>n(e.target.value),className:"input-field bg-white",disabled:u,children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),m.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.icon," ",e.label]},e.id))]})]}),(0,r.jsxs)("div",{className:"md:col-span-4",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Location"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>{c(e.target.value),d(!1)},placeholder:"Enter address or use current location",className:"input-field",disabled:u})]}),(0,r.jsx)("div",{className:"md:col-span-4 flex flex-col space-y-2",children:(0,r.jsxs)("div",{className:"flex space-x-2 flex-1",children:[(0,r.jsx)("button",{type:"submit",disabled:u,className:"btn-primary flex-1 flex items-center justify-center space-x-2",children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",opacity:"0.25"}),(0,r.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:u?"Searching...":"Search"})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{children:"\uD83D\uDD0D Search"})})}),(0,r.jsx)("button",{type:"button",onClick:p,disabled:u,className:"btn-secondary whitespace-nowrap",title:"Use your current location",children:"\uD83D\uDCCD"})]})})]}),(0,r.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3 font-medium",children:"Quick filters:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>n(e.id),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-all ".concat(a===e.id?"bg-gradient-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.icon," ",e.label]},e.id))})]})]})}},5027:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(5893),s=a(7294),l=a(1163),n=a(9008),i=a.n(n),c=a(9871),o=a(4865),d=a(9680),u=a(8561);function x(){let e=(0,l.useRouter)(),[t,a]=(0,s.useState)([]),[n,x]=(0,s.useState)(!0),[m,h]=(0,s.useState)(0);(0,s.useEffect)(()=>{e.isReady&&p()},[e.isReady,e.query]);let p=async()=>{x(!0);try{let t={...e.query},r=await (0,u.J9)(t);a(r.data.data||[]),h(r.data.total||0)}catch(e){console.error("Error fetching providers:",e)}finally{x(!1)}};return(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"Search Results - LocalServices"})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Find Service Providers"}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(d.Z,{onSearch:t=>{let a=new URLSearchParams;t.category&&a.append("category",t.category),t.location&&a.append("q",t.location),t.lat&&a.append("lat",t.lat),t.lng&&a.append("lng",t.lng),e.push("/search?".concat(a.toString()))}})}),n?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("div",{className:"text-xl",children:"Loading..."})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["Found ",m," provider",1!==m?"s":""]})}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-xl text-gray-600",children:"No providers found"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search filters"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,r.jsx)(o.Z,{provider:e},e.id))})]})]})]})}},8806:function(e,t,a){"use strict";a.d(t,{g:function(){return l},v:function(){return n}});var r=a(7066);let s=a(3454).env.NEXT_PUBLIC_MAPBOX_KEY,l=async e=>{try{let t=await r.Z.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json"),{params:{access_token:s,limit:1}});if(t.data.features.length>0){let[e,a]=t.data.features[0].center;return{lat:a,lng:e}}return null}catch(e){return console.error("Geocoding error:",e),null}},n=()=>new Promise((e,t)=>{if(!navigator.geolocation){t(Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},e=>t(e))})}},function(e){e.O(0,[173,871,774,888,179],function(){return e(e.s=2774)}),_N_E=e.O()}]);