(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2774:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(5027)}])},4865:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(5893),s=a(1664),n=a.n(s),l=a(1782);function c(e){var t;let{provider:a}=e;return(0,r.jsx)(n(),{href:"/providers/".concat(a.id),children:(0,r.jsxs)("div",{className:"card hover:shadow-md cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 hover:text-blue-600 transition-colors",children:a.full_name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:null===(t=a.category)||void 0===t?void 0:t.name})]}),a.is_verified&&(0,r.jsx)("span",{className:"badge badge-green text-xs ml-2",children:"âœ“ Verified"})]}),(0,r.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,r.jsx)(l.Z,{rating:a.rating_avg||0}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[a.experience_years||0," years experience"]})]}),a.distance&&(0,r.jsxs)("p",{className:"text-sm text-blue-600",children:["\uD83D\uDCCD ",a.distance.toFixed(1)," km away"]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[a.reviews_count||0," reviews"]})})]})})}},9680:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(5893),s=a(7294),n=a(8806);function l(e){let{onSearch:t}=e,[a,l]=(0,s.useState)(""),[c,i]=(0,s.useState)(""),[o,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1),m=async e=>{e.preventDefault();let r={category:a,location:c};if(o)try{x(!0);let e=await (0,n.v)();r={...r,lat:e.lat,lng:e.lng}}catch(e){console.error("Error getting location:",e)}finally{x(!1)}t(r)},h=async()=>{try{x(!0);let e=await (0,n.v)();i("".concat(e.lat.toFixed(4),", ").concat(e.lng.toFixed(4))),d(!0)}catch(e){alert("Could not get your location. Please enter manually.")}finally{x(!1)}};return(0,r.jsx)("form",{onSubmit:m,className:"card",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Service Category"}),(0,r.jsxs)("select",{value:a,onChange:e=>l(e.target.value),className:"select-field",disabled:u,children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),["plumber","carpenter","gardener","fumigation","catering","cleaner","electrician"].map(e=>(0,r.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Location"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>{i(e.target.value),d(!1)},placeholder:"Enter location or use current",className:"input-field",disabled:u})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-end space-y-2",children:[(0,r.jsx)("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"Loading...":"Search"}),(0,r.jsx)("button",{type:"button",onClick:h,className:"btn-secondary",disabled:u,children:"Use My Location"})]})]})})}},5027:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(5893),s=a(7294),n=a(1163),l=a(9008),c=a.n(l),i=a(9871),o=a(4865),d=a(9680),u=a(8561);function x(){let e=(0,n.useRouter)(),[t,a]=(0,s.useState)([]),[l,x]=(0,s.useState)(!0),[m,h]=(0,s.useState)(0);(0,s.useEffect)(()=>{e.isReady&&p()},[e.isReady,e.query]);let p=async()=>{x(!0);try{let t={...e.query},r=await (0,u.J9)(t);a(r.data.data||[]),h(r.data.total||0)}catch(e){console.error("Error fetching providers:",e)}finally{x(!1)}};return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Search Results - LocalServices"})}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Search Providers"}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(d.Z,{onSearch:t=>{let a=new URLSearchParams;t.category&&a.append("category",t.category),t.location&&a.append("q",t.location),t.lat&&a.append("lat",t.lat),t.lng&&a.append("lng",t.lng),e.push("/search?".concat(a.toString()))}})}),l?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-muted",children:"Loading providers..."})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-8 pb-4 border-b border-gray-200",children:(0,r.jsxs)("p",{className:"text-gray-700 font-medium",children:["Found ",m," provider",1!==m?"s":""]})}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-xl text-gray-700 font-medium",children:"No providers found"}),(0,r.jsx)("p",{className:"text-muted mt-2",children:"Try adjusting your search criteria"})]}):(0,r.jsx)("div",{className:"grid-3",children:t.map(e=>(0,r.jsx)(o.Z,{provider:e},e.id))})]})]})]})}},8806:function(e,t,a){"use strict";a.d(t,{g:function(){return n},v:function(){return l}});var r=a(7066);let s=a(3454).env.NEXT_PUBLIC_MAPBOX_KEY,n=async e=>{try{let t=await r.Z.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json"),{params:{access_token:s,limit:1}});if(t.data.features.length>0){let[e,a]=t.data.features[0].center;return{lat:a,lng:e}}return null}catch(e){return console.error("Geocoding error:",e),null}},l=()=>new Promise((e,t)=>{if(!navigator.geolocation){t(Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},e=>t(e))})}},function(e){e.O(0,[173,804,774,888,179],function(){return e(e.s=2774)}),_N_E=e.O()}]);